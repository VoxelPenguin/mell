type Issue @table(audit: true) @export {
  id: ID @primaryKey
  photoUrl: String!
  typeId: ID @indexed
  type: IssueType @relationship(from: typeId)
  description: String!
  coordinates: [Float!]! @indexed(type: "HNSW")
  address: String!
  communityId: ID! @indexed
  community: Community @relationship(from: communityId)
  status: IssueStatus!
  numUpvotes: Int!
  createdAt: Date @createdTime
  updatedAt: Date @updatedTime
}

enum IssueStatus {
  Open
  UnderReview
  Scheduled
  InProgress
  Completed
  NotPlanned
}

type IssueType @table @export {
  id: ID @primaryKey
  name: String! @indexed
  createdAt: Date @createdTime
  updatedAt: Date @updatedTime
}

type Community @table @sealed @export {
  id: ID @primaryKey
  name: String! @indexed
  logoUrl: String
  geographicCenter: [Float!]! @indexed(type: "HNSW")
  radiusMeters: Int!
  issueTypes: [IssueType!]! @relationship(to: communityId)
  issues: [Issue!]! @relationship(to: communityId)
  createdAt: Date @createdTime
  updatedAt: Date @updatedTime
}
